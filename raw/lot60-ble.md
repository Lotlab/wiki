title: Lot60-BLE 键盘使用说明
category: 教程
time: 1567123076035
---
# 概述

Lot60-BLE 是一款低功耗蓝牙双模键盘。其固件底层使用了TMK作为键盘功能核心，并实现了95%的TMK功能[^1]。其采用了与GH60完全一致的按键阵列，使其配列文件与GH60几乎完全兼容。

## LED 一览
Lot60-BLE 包含了1个CapsLock LED，和一个RGB LED 状态指示灯（或3个单色LED状态指示灯）。

RGB 状态指示灯位于Esc按键处，使用贴片的LED灯，故需要使用RGB轴。

如果不想使用RGB轴，可以放弃这个LED灯，转而使用位于按键1, 2, 3处的LED指示灯。

# 使用手册

## 快速入门
1. （如果购买的是散件）按照线路板上的标识，将两个芯片焊接到线路板上，并焊接USB口。
2. 使用USB线连接到你的电脑。如果电脑能够成功的识别到名为“Lot60-BLE”的设备，说明USB芯片工作正常。这时用镊子尝试短路任意一个按键，观察是否有按键输入。若有按键输入，则说明整块键盘工作正常。
3. 如果你想使用3个状态指示灯而不是一个RGB状态指示灯，那么请拆除正面的RGB指示灯。
4. 组装你的键盘。注意要先装定位板，再装轴哦~
5. 将电池连接到键盘背面的电池接口。注意正负极不要装反，否则可能会导致键盘烧毁。
6. 好了，你的Lot60-BLE键盘已经组装完成了。插上USB尝试一下吧！

## 默认配列

![默认配列图](/raw/lot60-ble/keymap.png)

## 操作说明

### 开机

同时按下Space(空格)+E大约1秒，直到LED指示灯亮起即可开机。

插入USB的同时键盘会自动开机。

### 蓝牙连接设备

在键盘开机的状态下，使用你要连接设备的蓝牙搜索功能搜索蓝牙设备。你会见到一个叫做`BLE60-Rev.E_XXXXXX`或`Lot60-BLE_XXXXXX`的设备，使用设备连接，并按设备提示在键盘上输入配对码即可。

### USB 连接设备

直接将USB线缆插入到键盘的USB接口，键盘即自动切换至USB模式。这时候就可以使用USB模式输入了。

### USB/蓝牙状态切换

在默认配列下，按下Fn0+Tab，即可在USB和蓝牙两种模式下切换。

### 省电模式

在没有接入USB电源的情况下，键盘处于省电模式。

在省电模式下，所有的指示灯仅在变化后亮起5秒，然后熄灭。键盘在无操作15秒后转入慢速扫描模式，无操作600秒后自动睡眠。

自动睡眠后，按下键盘的任意按键即可再次唤醒。

### 电量显示

在新版本的iOS、安卓和Windows上，应该能够正确的显示蓝牙设备的电量百分比。

由于测量方式可能有误差，电量百分比可能无法达到100%或者低至0%，这是正常现象。电量百分比仅供参考。

对于安卓手机，如果没有正确的显示电量，可以尝试下载BatON软件来获取蓝牙设备电量。

### RGB 颜色说明

注意显示的颜色可能和实际颜色有略微色差

- <span style="color: #FFFFFF">■</span>白色：无连接
- <span style="color: #66CCFF">■</span>天依蓝：蓝牙已连接
- <span style="color: #0099FF">■</span>天蓝色：USB已连接
- <span style="color: #FF8000">■</span>橙色：充电中
- <span style="color: #00FF00">■</span>绿色：充电完毕
- <span style="color: #FFFF00">■</span>黄色：输入配对密码
- <span style="color: #FF0080">■</span>紫红色：配对密码输入完毕
- <span style="color: #FF00FF">■</span>紫色：休眠

### 手动休眠

在默认配列下，按下Fn0+CapsLock，即可让键盘进入休眠状态。

手动休眠后，需要手工按下Space+U才能再次唤醒。

### 删除绑定

若想要连接到其他的蓝牙设备，或蓝牙连接不正常，则可尝试删除绑定。

先手动休眠键盘，然后在开机时按下Space+E即可删除绑定。（即在休眠后，按下Space+U+E开机）

### 全键无冲（NKRO）

此键盘支持NKRO（全键无冲）模式，但默认不启用全键无冲。全键无冲仅在USB模式下才可使用。

在键盘开机时按下Space+N（即在休眠后，按下Space+U+N开机），即可切换全键无冲的状态。

### 其他功能键（BootMagic）

以下是所有的开机时功能键的列表，你可以在开机时同时按下Space+下面的键来实现对应的功能。

需要注意的是，下面的按键全部都指的是当前配列的第0层按键。如果你更改了配列，那么这些按键的位置可能会发生变化。

- E: 擦除蓝牙绑定
- Esc：跳过Bootmagic
- Backspace：重置eeconfig
- B: 进入Bootloader
- D：切换Debug模式
  - X：切换阵列Debug模式
  - K：切换键盘Debug模式
  - M：切换鼠标Debug模式
- LCtrl：交换capslock和左ctrl
- CapsLock: 将capslock用作ctrl
- LAlt：交换LAlt和LGUI
- RAlt: 交换RAlt和RGUI
- LGUI：禁用GUI按钮
- `(1左边那个, Grave): 交换Esc和Grave
- \: 交换\和Backspace
- N：切换NKRO状态
- 0~7：设置默认层为对应数字的层

### 刷配列

在这里，我假设你已经熟悉如何使用 [Keyboard layout editor](https://www.keyboard-layout-editor.com/) 和 [TMK Keymap Generator](https://tools.lotlab.org/tkg/) 来创建适用于键盘的配列了。

因这个键盘含有额外的两项功能键（即切换设备和睡眠），故通常的TKG无法满足要求。请使用上面给出的链接中的TKG，里面包含了这块自定义键盘的额外两颗功能按键。

在TKG中配置好配列并下载后，将键盘使用USB连接到电脑。打开 [配列下载工具(KeymapDownloader.exe)](https://github.com/Lotlab/nrf52-keyboard/releases) ，选择你的键盘和配列，点击下载，即可将新的配列下载到键盘中。

### 固件更新

你可能需要升级固件来获得新功能或者修复已有的BUG，升级包可以在页面最下方的固件发布处找到。

> **刷入不正确的固件可能会使得你的键盘损坏！**
>
> 请在升级前确认升级包是由可信的人员提供的。
>
> 升级包可能包含程序(Application)、蓝牙栈(Soft Device)和引导程序(Boot Loader)，刷入错误的蓝牙栈和引导程序将会使DFU功能完全不可用。在这种情况下，您必须使用SWD接口烧录正确的蓝牙栈、引导程序和程序，才能使键盘恢复正常工作。
>
> 如果您刷入了错误的程序(Application)无法进入DFU模式，您可以将电池卸下，按住Fn键再接上电池强制进入DFU模式。

1. 使用手机下载并打开 nRF Connect[^2] 程序
2. 点击nRF Connect右上角的Scan扫描蓝牙设备，这时候应该能够见到你的蓝牙键盘
4. 点击CONNCET按钮，等待连接成功
5. 点击右上角的DFU按钮，选择第一个Distribution packet(ZIP)，然后选择升级包
6. 静静的等待升级完毕即可

如果在点击DFU后出现问题，无法继续刷新。可以尝试以下步骤
1. 休眠键盘
2. 在开机时按下Space+B，强制进入DFU模式。
3. 点击nRF Connect右上角的Scan扫描蓝牙设备，这时应该会找到一个叫做DfuTarg的蓝牙设备
4. 按照上面的4-6步再做一遍。

刷新完成后可能要手工在手机或电脑上取消配对并重新配对才可继续使用

# 常见问题

## Q&A

## 故障排除

### 我的键盘无法开机了

尝试使用USB接入电脑，看看是否能够正常工作？如果可以的话，可能是电池没电了，需要充电。

### 按键部分（全部）混乱了

可能是你刷入了错误的配列，尝试使用配列更新工具重新更新试试？

亦或者是你选择了不正确的默认层。先休眠键盘（如果没法休眠，那就放着等600秒，或者拔电池），然后按 Space+BackSpace 重置默认层的设定。

### Windows 下出现“驱动程序错误”

请在设备管理器中删除这个设备，取消绑定，重启电脑，并在键盘上删除绑定，然后重新连接试试。

### 有时候出现卡键的问题

这是蓝牙信号不好的原因。请尝试将键盘放到蓝牙主机旁边，并远离2.4G路由器和金属表面。尽量不要使用金属外壳，否则信号很可能会变得很差。


[^1]: 没用实现的TMK功能包括：Command Key(固件空间不够), 鼠标键(EP不够)，以及LED灯效(这个键盘没灯)
[^2]: 可以到 [官方下载页面](http://www.nordicsemi.com/eng/Products/Nordic-mobile-Apps/nRF-Connect-for-mobile-previously-called-nRF-Master-Control-Panel) 或者应用商店下载。支持IOS和安卓端。